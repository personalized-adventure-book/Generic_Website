<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Personalized Products</title>
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #f5f7fa; color: #333; }
    header, footer { background: #4a90e2; color: white; padding: 1rem 2rem; }
    header nav a { margin: 0 1rem; color: white; text-decoration: none; font-weight: bold; }
    main { padding: 2rem; max-width: 1000px; margin: auto; }
    section { margin-bottom: 4rem; }
    h1, h2 { color: #4a90e2; }
    .btn-order { background: #4a90e2; color: white; border: none; padding: 0.75rem 1.5rem; font-size: 1.1rem; border-radius: 6px; cursor: pointer; }
    .btn-order:hover { background: #357acc; }
    form { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    form div { margin-bottom: 1.5rem; }
    label { font-weight: bold; display: block; margin-bottom: 0.4rem; }
    input, select, textarea { width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 6px; }
    .step { display: none; }
    .step.active { display: block; }
    footer { text-align: center; font-size: 0.9rem; }
    footer a { color: white; text-decoration: underline; }
  </style>
</head>
<body>

<header>
  <h1>My Custom Shop</h1>
  <nav>
    <a href="#about">About</a>
    <a href="#products">Products</a>
    <a href="#faq">FAQ</a>
    <a href="#order">Order</a>
  </nav>
</header>

<main>
  <section id="about">
    <h2>About Us</h2>
    <p id="about-text">Loading...</p>
  </section>

  <section id="products">
    <h2>Our Products</h2>
    <p id="products-text">Loading...</p>
  </section>

  <section id="faq">
    <h2>Frequently Asked Questions</h2>
    <p id="faq-text">Loading...</p>
  </section>

  <section id="order">
    <h2>Place Your Order</h2>
    <form id="dynamic-form">
      <div class="step step-1 active">
        <h3>Step 1: Personal Information</h3>
        <div><label for="name">Full Name</label><input type="text" id="name" name="name" required></div>
        <div><label for="email">Email</label><input type="email" id="email" name="email" required></div>
        <button type="button" class="btn-order" onclick="nextStep()">Next</button>
      </div>

      <div class="step step-2">
        <h3>Step 2: Product Details</h3>
        <div><label for="product">Choose Product</label>
          <select id="product" name="product">
            <option value="book">Personalized Adventure Book</option>
            <option value="button">Custom Button</option>
          </select>
        </div>
        <div><label for="details">Customization Info</label><textarea id="details" name="details" rows="4"></textarea></div>
        <button type="button" class="btn-order" onclick="prevStep()">Back</button>
        <button type="submit" class="btn-order">Submit Order</button>
      </div>
    </form>
  </section>
</main>

<footer>
  <p>&copy; 2025 My Custom Shop | <a href="#">Privacy Policy</a> | <a href="#">Terms of Use</a></p>
</footer>

<script>
  // 1. Get ?id from URL
  const id = new URLSearchParams(location.search).get("id") || "1";

  // ✅ 2. Your init() function goes here
function init(row) {
  if (!Array.isArray(row) || row.length < 3) {
    alert("Invalid data from sheet");
    return;
  }

  const [about, products, faq, ...formFields] = row;

  document.getElementById("about-text").innerText = about;
  document.getElementById("products-text").innerText = products;
  document.getElementById("faq-text").innerText = faq;

  const step2 = document.querySelector(".step-2");

  // Insert custom fields just above the "Back" button
  const insertBeforeBtn = step2.querySelector('button[type="button"]');

  formFields.forEach((field, i) => {
    if (!field) return;

    const div = document.createElement("div");

    const label = document.createElement("label");
    label.innerText = field;
    label.htmlFor = "field" + (i + 1);

    const input = document.createElement("input");
    input.name = field;
    input.id = "field" + (i + 1);
    input.placeholder = field;
    input.type = "text";

    div.appendChild(label);
    div.appendChild(input);

    step2.insertBefore(div, insertBeforeBtn);
  });
}
  // ✅ 3. Inject the JSON-P script
  (function () {
    const s = document.createElement("script");
    s.src = "https://script.google.com/macros/s/AKfycbxomnBCc-HtyYOogmi0ljnrK_SLyWAIM57TkUfemDO1Ou0lo9_08DnuMKnW-7qF3wdB/exec"
          + "?id=" + encodeURIComponent(id)
          + "&callback=init";
    document.body.appendChild(s);
  })();
</script>

</body>
</html>
